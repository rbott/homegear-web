<div data-role="page" id="peer{$value.peerId}" class="pages">
	<div data-role="header" style="text-align: center;">
		<a style="float: left; margin-left: 10px;" href="#" data-role="button" data-mini="true" class="prev" id="goBack">Back</a>
		<h1 style="display: inline-block;"><img src="images/radiator-16.png" />{$value.name}</h1>
		<a style="float: right; margin-right: 10px;" href="#" data-role="button" data-mini="true" class="next" id="goNext">Next</a>
	</div><!-- /header -->

	<div role="main" class="ui-content">

				<div class="ui-grid-b ui-responsive">
					<div class="ui-block-a"><div id="tempSensor{$value.peerId}" style="min-width: 180px; max-height: 160px; margin: 10px auto;"></div></div>
					<div class="ui-block-b"><div id="targetTemp{$value.peerId}" style="min-width: 180px; max-height: 160px; margin: 10px auto;"></div></div>
					<div class="ui-block-c"><div id="valveState{$value.peerId}" style="min-width: 180px; max-height: 160px; margin: 10px auto;"></div></div>
				</div>
				<form method="POST" action="action.php" data-ajax="false">
				<input type="hidden" name="peerId" id="peerID{$value.peerId}" value="{$value.peerId}">
				<input type="hidden" name="method" id="method{$value.peerId}" value="updateValve">
				<div class="ui-grid-b form-breakpoint">
					<div class="ui-block-a">
						<fieldset data-role="controlgroup" data-mini="true" data-type="horizontal">
							<legend>Betriebsmodus:</legend>
							<input name="mode" id="optModeAuto{$value.peerId}" value="auto" {if="$value.controlMode == 'auto'"}checked="checked"{/if} type="radio">
							<label for="optModeAuto{$value.peerId}">Auto</label>
							<input name="mode" id="optModeManual{$value.peerId}" value="manual" {if="$value.controlMode == 'manual'"}checked="checked"{/if} type="radio">
							<label for="optModeManual{$value.peerId}">Manual</label>
							<input name="mode" id="optModeParty{$value.peerId}" value="party" {if="$value.controlMode == 'party'"}checked="checked"{/if} type="radio">
							<label for="optModeParty{$value.peerId}">Party</label>
							<input name="mode" id="optModeBoost{$value.peerId}" value="boost" {if="$value.controlMode == 'boost'"}checked="checked"{/if} type="radio">
							<label for="optModeBoost{$value.peerId}">Boost</label>
						</fieldset>
					</div>
					<div class="ui-block-b">
						<label for="targetTempSlider">SOLL-Temperatur:</label>
						<input name="targetTemp" id="targetTempSlider" data-highlight="true" min="5" max="30" value="{$value.targetTemp}" type="range">
					</div>
					<div class="ui-block-c">
						<input value="Aktualisieren" type="submit">
					</div>
				</div>
				<div class="ui-grid-b form-breakpoint">
					<div class="ui-block-a">
						<fieldset data-role="controlgroup" data-mini="true" data-type="horizontal" disabled>
							<legend>Temperatur-Abfall-Modus:</legend>
							<input name="tempFallMode" id="optModeInactive{$value.peerId}" value="inactive" {if="$value.tempFallMode == 'inactive'"}checked="checked"{/if} type="radio">
							<label for="optModeInactive{$value.peerId}">Aus</label>
							<input name="tempFallMode" id="optTempFallModeAuto{$value.peerId}" value="auto" {if="$value.tempFallMode == 'auto'"}checked="checked"{/if} type="radio">
							<label for="optTempFallModeAuto{$value.peerId}">Auto</label>
							<input name="tempFallMode" id="optTempFallModeAutoManu{$value.peerId}" value="auto_manual" {if="$value.tempFallMode == 'auto_manual'"}checked="checked"{/if} type="radio">
							<label for="optTempFallModeAutoManu{$value.peerId}">Manual</label>
							<input name="tempFallMode" id="optTempFallModeAutoParty{$value.peerId}" value="auto_party" {if="$value.tempFallMode == 'auto_party'"}checked="checked"{/if} type="radio">
							<label for="optTempFallModeAutoParty{$value.peerId}">Party</label>
							<input name="tempFallMode" id="optTempFallModeActive{$value.peerId}" value="active" {if="$value.tempFallMode == 'active'"}checked="checked"{/if} type="radio">
							<label for="optTempFallModeActive{$value.peerId}">An</label>
						</fieldset>
					</div>
					<div class="ui-block-b">
						<label for="tempFallTempSlider">Temperatur-Abfall-Temperatur:</label>
						<input name="tempFallTemp" id="tempFallTempSlider" data-highlight="true" min="5" max="30" value="{$value.tempFallTemp}" type="range">
					</div>
					<div class="ui-block-c">
						<label for="tempFallWindowSlider">Temperatur-Abfall-Zeitfenster:</label>
						<input name="tempFallWindow" id="tempFallWindowSlider" data-highlight="true" min="1" max="99" value="{$value.tempFallWindow}" type="range">
					</div>
				</div>

				</form>
				<div class="ui-grid-b ui-responsive">
					<div class="ui-block-a"><img src="../graphs/output/{$value.peerId}_CurrentVsActual_daily.gif" style="max-width: 100%" ></div>
					<div class="ui-block-b"><img src="../graphs/output/{$value.peerId}_CurrentVsActual_monthly.gif" style="max-width: 100%" ></div>
					<div class="ui-block-c"><img src="../graphs/output/{$value.peerId}_CurrentVsActual_yearly.gif" style="max-width: 100%"></div>
				</div>
		<script type="text/javascript">

		$(document).on( "pageinit", "#peer{$value.peerId}", function(event, ui) {
			var GageSensor{$value.peerId} = $("#tempSensor{$value.peerId}").dynameter({
					// REQUIRED.
					label: 'Temp (IST)',
					value: "{$value.tempSensor}",
					unit: '°C',
					min: 5,
					max: 30,
					regions: {
						26: 'warn',
						30: 'error'
					}
			});
			var GageTarget{$value.peerId} = $("#targetTemp{$value.peerId}").dynameter({
					// REQUIRED.
					label: 'Temp (SOLL)',
					value: "{$value.targetTemp}",
					unit: '°C',
					min: 5,
					max: 30,
					regions: {
						26: 'warn',
						30: 'error'
					}
			});
			var GageValve{$value.peerId} = $("#valveState{$value.peerId}").dynameter({
					// REQUIRED.
					label: 'Ventil',
					value: "{$value.valveState}",
					unit: '%',
					min: 0,
					max: 100,
					regions: {
						90: 'warn',
						99: 'error'
					}
			});

		});

		</script>
	</div><!-- /content -->
	<div data-role="footer" style="text-align:center">
		<a style="float: left; margin-left: 10px;" href="#" data-role="button" data-mini="true" class="prev" id="goBack">Back</a>
		<h4 style="display: inline-block;">HomeMatic Control</h4>
		<a style="float: right; margin-right: 10px;" href="#" data-role="button" data-mini="true" class="next" id="goNext">Next</a>
	</div><!-- /footer -->
</div><!-- /page -->


